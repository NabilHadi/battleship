(()=>{"use strict";var n={890:(n,e,t)=>{t.d(e,{Z:()=>s});var r=t(537),a=t.n(r),i=t(645),o=t.n(i)()(a());o.push([n.id,'* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  color: #222;\n}\n\nbody {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.btn {\n  padding: 8px 16px;\n  background-color: #a6d4ea;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 600;\n  color: #444;\n  line-height: 1.5;\n}\n\n.btn[disabled] {\n  cursor: default;\n  opacity: 0.3;\n}\n\n.btn:not(.btn[disabled]):hover {\n  opacity: 0.8;\n}\n\n.btn:not(.btn[disabled]):active {\n  opacity: 1;\n}\n\n#container {\n  display: grid;\n}\n\n#game-container {\n  height: 100vh;\n  border: 1px solid #222;\n  padding: 8px;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-template-rows: repeat(4, 1fr);\n  background-color: aliceblue;\n  gap: 8px;\n  position: relative;\n}\n\n#game-container .game-overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n#game-container .game-overlay.hide {\n  display: none;\n}\n\n#first-player-container {\n  grid-column: 2/3;\n  grid-row: 2/3;\n}\n\n#first-player-ships {\n  grid-row: 2/4;\n  grid-column: 1/2;\n}\n\n#second-player-ships {\n  grid-row: 2/4;\n  grid-column: 4/5;\n}\n\n#second-player-container {\n  grid-column: 3/4;\n  grid-row: 2/3;\n}\n\n#ships-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n}\n\n.player-ships {\n  display: grid;\n  gap: 10px;\n  text-align: center;\n  grid-template-rows: 1fr max-content max-content max-content;\n}\n\n.player-ships #reset-ships-btn {\n  background-color: rgb(179, 220, 117);\n}\n\n.player-ships #restart-game-btn {\n  background-color: #73a7c1;\n}\n\n.player-ships #random-ships-btn {\n  background-color: rgb(179, 220, 117);\n}\n\n.player-ships .ship {\n  display: flex;\n  background-color: greenyellow;\n}\n\n.player-ships .ship[data-is-vertical="true"] {\n  flex-direction: column;\n}\n\n.player-ships .ship.hide-draggable-ship {\n  display: none;\n}\n\n.draggable {\n  cursor: move;\n}\n\n.draggable.dragging {\n  opacity: 0.5;\n}\n\n.player-ships .ship.h {\n  display: flex;\n  flex-direction: column;\n}\n\n.player-ships .ship > * {\n  height: 20px;\n  width: 20px;\n  border: 1px solid black;\n}\n\n.player-container {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n}\n\n.player-container .board-title {\n  padding: 3px;\n}\n\n.output-msg {\n  grid-row: 3/4;\n  grid-column: 2/4;\n  background-color: #222;\n  color: wheat;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.player-container .board {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(9, minmax(40px, 1fr));\n  grid-template-rows: repeat(9, minmax(40px, 1fr));\n  justify-content: center;\n  align-items: center;\n  background-color: #7ebbd9;\n  position: relative;\n}\n\n.board .board-unit {\n  border: 1px solid rgba(0, 0, 0, 0.234);\n  width: 100%;\n  height: 100%;\n}\n\n.board .board-unit.ship-placement-hint {\n  background-color: #222;\n}\n\n.board .board-unit[data-has-ship="true"] {\n  background-color: greenyellow;\n}\n\n.board .board-unit[data-is-hit="true"] {\n  background-color: rgb(0, 0, 0);\n}\n\n.board .board-unit[data-has-ship="true"][data-is-hit="true"] {\n  background-color: red;\n}\n\n.board .enemy-overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.board .enemy-overlay.hide {\n  display: none;\n}\n',"",{version:3,sources:["webpack://./src/styles/style.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,UAAU;EACV,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,yCAAyC;AAC3C;;AAEA;EACE,iBAAiB;EACjB,yBAAyB;EACzB,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,WAAW;EACX,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,YAAY;AACd;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,qCAAqC;EACrC,kCAAkC;EAClC,2BAA2B;EAC3B,QAAQ;EACR,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,uBAAuB;EACvB,mBAAmB;EACnB,oCAAoC;AACtC;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,gBAAgB;EAChB,aAAa;AACf;;AAEA;EACE,aAAa;EACb,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;EAChB,aAAa;AACf;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,aAAa;EACb,SAAS;EACT,kBAAkB;EAClB,2DAA2D;AAC7D;;AAEA;EACE,oCAAoC;AACtC;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,oCAAoC;AACtC;;AAEA;EACE,aAAa;EACb,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,YAAY;EACZ,WAAW;EACX,uBAAuB;AACzB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,kBAAkB;AACpB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,aAAa;EACb,gBAAgB;EAChB,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,OAAO;EACP,aAAa;EACb,mDAAmD;EACnD,gDAAgD;EAChD,uBAAuB;EACvB,mBAAmB;EACnB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,sCAAsC;EACtC,WAAW;EACX,YAAY;AACd;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,8BAA8B;AAChC;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,uBAAuB;EACvB,mBAAmB;EACnB,oCAAoC;AACtC;;AAEA;EACE,aAAa;AACf",sourcesContent:['* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  color: #222;\n}\n\nbody {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.btn {\n  padding: 8px 16px;\n  background-color: #a6d4ea;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 600;\n  color: #444;\n  line-height: 1.5;\n}\n\n.btn[disabled] {\n  cursor: default;\n  opacity: 0.3;\n}\n\n.btn:not(.btn[disabled]):hover {\n  opacity: 0.8;\n}\n\n.btn:not(.btn[disabled]):active {\n  opacity: 1;\n}\n\n#container {\n  display: grid;\n}\n\n#game-container {\n  height: 100vh;\n  border: 1px solid #222;\n  padding: 8px;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-template-rows: repeat(4, 1fr);\n  background-color: aliceblue;\n  gap: 8px;\n  position: relative;\n}\n\n#game-container .game-overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n#game-container .game-overlay.hide {\n  display: none;\n}\n\n#first-player-container {\n  grid-column: 2/3;\n  grid-row: 2/3;\n}\n\n#first-player-ships {\n  grid-row: 2/4;\n  grid-column: 1/2;\n}\n\n#second-player-ships {\n  grid-row: 2/4;\n  grid-column: 4/5;\n}\n\n#second-player-container {\n  grid-column: 3/4;\n  grid-row: 2/3;\n}\n\n#ships-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n}\n\n.player-ships {\n  display: grid;\n  gap: 10px;\n  text-align: center;\n  grid-template-rows: 1fr max-content max-content max-content;\n}\n\n.player-ships #reset-ships-btn {\n  background-color: rgb(179, 220, 117);\n}\n\n.player-ships #restart-game-btn {\n  background-color: #73a7c1;\n}\n\n.player-ships #random-ships-btn {\n  background-color: rgb(179, 220, 117);\n}\n\n.player-ships .ship {\n  display: flex;\n  background-color: greenyellow;\n}\n\n.player-ships .ship[data-is-vertical="true"] {\n  flex-direction: column;\n}\n\n.player-ships .ship.hide-draggable-ship {\n  display: none;\n}\n\n.draggable {\n  cursor: move;\n}\n\n.draggable.dragging {\n  opacity: 0.5;\n}\n\n.player-ships .ship.h {\n  display: flex;\n  flex-direction: column;\n}\n\n.player-ships .ship > * {\n  height: 20px;\n  width: 20px;\n  border: 1px solid black;\n}\n\n.player-container {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n}\n\n.player-container .board-title {\n  padding: 3px;\n}\n\n.output-msg {\n  grid-row: 3/4;\n  grid-column: 2/4;\n  background-color: #222;\n  color: wheat;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.player-container .board {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(9, minmax(40px, 1fr));\n  grid-template-rows: repeat(9, minmax(40px, 1fr));\n  justify-content: center;\n  align-items: center;\n  background-color: #7ebbd9;\n  position: relative;\n}\n\n.board .board-unit {\n  border: 1px solid rgba(0, 0, 0, 0.234);\n  width: 100%;\n  height: 100%;\n}\n\n.board .board-unit.ship-placement-hint {\n  background-color: #222;\n}\n\n.board .board-unit[data-has-ship="true"] {\n  background-color: greenyellow;\n}\n\n.board .board-unit[data-is-hit="true"] {\n  background-color: rgb(0, 0, 0);\n}\n\n.board .board-unit[data-has-ship="true"][data-is-hit="true"] {\n  background-color: red;\n}\n\n.board .enemy-overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.board .enemy-overlay.hide {\n  display: none;\n}\n'],sourceRoot:""}]);const s=o},645:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",r=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),r&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),r&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,r,a,i){"string"==typeof n&&(n=[[null,n,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<n.length;l++){var d=[].concat(n[l]);r&&o[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),e.push(d))}},e}},537:n=>{n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(a," */"),o=t.sources.map((function(n){return"/*# sourceURL=".concat(t.sourceRoot||"").concat(n," */")}));return[e].concat(o).concat([i]).join("\n")}return[e].join("\n")}},379:n=>{var e=[];function t(n){for(var t=-1,r=0;r<e.length;r++)if(e[r].identifier===n){t=r;break}return t}function r(n,r){for(var i={},o=[],s=0;s<n.length;s++){var c=n[s],l=r.base?c[0]+r.base:c[0],d=i[l]||0,u="".concat(l," ").concat(d);i[l]=d+1;var A=t(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==A)e[A].references++,e[A].updater(p);else{var f=a(p,r);r.byIndex=s,e.splice(s,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function a(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,a){var i=r(n=n||[],a=a||{});return function(n){n=n||[];for(var o=0;o<i.length;o++){var s=t(i[o]);e[s].references--}for(var c=r(n,a),l=0;l<i.length;l++){var d=t(i[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=c}}},569:n=>{var e={};n.exports=function(n,t){var r=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},565:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},795:n=>{n.exports=function(n){var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},589:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},e={};function t(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={id:r,exports:{}};return n[r](i,i.exports,t),i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{var n=t(379),e=t.n(n),r=t(795),a=t.n(r),i=t(569),o=t.n(i),s=t(565),c=t.n(s),l=t(216),d=t.n(l),u=t(589),A=t.n(u),p=t(890),f={};function g(n){return function(n){if(Array.isArray(n))return h(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(n){if("string"==typeof n)return h(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(n,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}f.styleTagTransform=A(),f.setAttributes=c(),f.insert=o().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=d(),e()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals;var y=function(n){return Math.floor(Math.random()*n)},b=function(n){return{x:y(n),y:y(n)}},m=function(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"div":t,a=e.id,i=void 0===a?"":a,o=e.classes,s=void 0===o?[]:o,c=e.textContent,l=void 0===c?"":c,d=document.createElement(r);return d.id=i,(n=d.classList).add.apply(n,g(s)),d.textContent=l,d};const v=function(n){var e=n.id,t=n.classes,r=n.textContent,a=n.clickHandler,i=m({id:e,classes:t,textContent:r});return{getView:function(){return i},disableBtn:function(){i.removeEventListener("click",a),i.setAttribute("disabled","")},enableBtn:function(){i.addEventListener("click",a),i.removeAttribute("disabled")}}},C=function(n,e,t,r){var a=m({classes:n});return a.dataset.x=e,a.dataset.y=t,a.dataset.player=r,{addHasShip:function(){a.dataset.hasShip=!0},addIsHit:function(){a.dataset.isHit=!0},removeHasShip:function(){a.dataset.hasShip=!1},removeIsHit:function(){a.dataset.isHit=!1},getView:function(){return a}}};function E(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}const B=function(n){var e=n.id,t=n.classes,r=n.boardArray,a=n.playerId,i=n.startGameClickHandler,o=m({id:e,classes:t}),s=m({id:"board-".concat(a,"-overlay"),classes:["enemy-overlay","hide"]}),c=v({id:"start-game-btn-".concat(a),classes:["start-game-btn","btn"],textContent:"START GAME",clickHandler:i});s.append(c.getView()),o.append(s);var l,d=[],u=[],A=function(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return E(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,a=function(){};return{s:a,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return o=n.done,n},e:function(n){s=!0,i=n},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}(r);try{for(A.s();!(l=A.n()).done;){var p=l.value,f=C(["board-unit"],p.x,p.y,a);d.push(f),o.append(f.getView())}}catch(n){A.e(n)}finally{A.f()}return{changeHitStateFor:function(n,e){var t=d.find((function(e){return e.getView().dataset.x==n.x&&e.getView().dataset.y==n.y}));t&&(t.getView().dataset.isHit=!0,e||(t.addHasShip(),u.push(t)))},changeShipStateFor:function(n,e){var t=d.find((function(e){return e.getView().dataset.x==n.x&&e.getView().dataset.y==n.y}));t&&(e?(t.addHasShip(),u.push(t)):(t.removeHasShip(),u=u.filter((function(n){}))))},changeShipHintClass:function(n,e){var t=d.find((function(e){return e.getView().dataset.x==n.x&&e.getView().dataset.y==n.y}));t&&(e?t.getView().classList.add("ship-placement-hint"):t.getView().classList.remove("ship-placement-hint"))},removeAllShips:function(){d.forEach((function(n){n.removeHasShip()}))},resetBoard:function(){d.forEach((function(n){n.removeHasShip(),n.removeIsHit()}))},showOverLay:function(){s.classList.remove("hide")},hideOverlay:function(){s.classList.add("hide")},getView:function(){return o},getBoardItemViews:function(){return d},enableStartGameBtn:function(){c.enableBtn()},disableStartGameBtn:function(){c.disableBtn()}}};var x="computerPlayed",S="preGame",w="shipPlacement",k="gameStart",O="gameEnded",j="restartGame";const V=function(){function n(n){this._handlers=[],this.name=n}n.prototype.addHandler=function(n){this._handlers.push(n)},n.prototype.removeHandler=function(n){this._handlers=this._handlers.filter((function(n){}))},n.prototype.fire=function(n){this._handlers.forEach((function(e){e(n)}))};var e=[];function t(n){return e.find((function(e){return e.name===n}))}return{publish:function(r,a){var i=t(r);i||(i=new n(r),e.push(i)),i.fire(a)},subscribe:function(r,a){var i=t(r);i||(i=new n(r),e.push(i)),i.addHandler(a)}}}();function P(n){return function(n){if(Array.isArray(n))return H(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(n){if("string"==typeof n)return H(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?H(n,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var I=function(){var n,e,t,r;V.subscribe(S,(function(a){var i=a.p1,o=a.p1Gameboard,s=a.p2,c=a.p2Gameboard;n=i,e=o,t=s,r=c}));var a=!0;return{get player1(){return n},get player2(){return t},get player1Gameboard(){return e},get player2Gameboard(){return r},get isFirstPlayerTurn(){return a},set isFirstPlayerTurn(n){a=n},nextPlayerTurn:function(){a=!1,this.checkForWinner()||setTimeout((function(){V.publish(x,t.play()),e.isAllShipsSunk()&&V.publish(O,{winner:t})}),300)},placeShipsOnBoards:function(){var n,e,t,a,i;(n=r).placeShipAt.apply(n,P(r.getValidShipCoordinates(5))),(e=r).placeShipAt.apply(e,P(r.getValidShipCoordinates(4))),(t=r).placeShipAt.apply(t,P(r.getValidShipCoordinates(3))),(a=r).placeShipAt.apply(a,P(r.getValidShipCoordinates(3))),(i=r).placeShipAt.apply(i,P(r.getValidShipCoordinates(2)))},checkForWinner:function(){return e.isAllShipsSunk()?(V.publish(O,{winner:t}),!0):!!r.isAllShipsSunk()&&(V.publish(O,{winner:n}),!0)}}}();const G=I,L=function(n){var e=n.id,t=n.classes,r=n.isVertical,a=n.isDraggable,i=n.length,o=m({id:e,classes:t});o.dataset.isVertical=r,o.draggable=a,o.dataset.length=i;for(var s=0;s<i;s++)o.append(m());var c=!1;return{getView:function(){return o},addClass:function(n){o.classList.add(n)},removeClass:function(n){o.classList.remove(n)},setIsVertical:function(n){o.dataset.isVertical=n},get isPlaced(){return c},set isPlaced(n){n?this.addClass("hide-draggable-ship"):this.removeClass("hide-draggable-ship"),c=n}}};function D(n){return function(n){if(Array.isArray(n))return T(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(n){if("string"==typeof n)return T(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(n,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var M=L({id:"aircraft",classes:["ship","draggable"],isVertical:!1,isDraggable:!0,length:5}),Y=L({id:"battleship",classes:["ship","draggable"],isVertical:!1,isDraggable:!0,length:4}),F=L({id:"submarine",classes:["ship","draggable"],isVertical:!1,isDraggable:!0,length:3}),W=L({id:"cruiser",classes:["ship","draggable"],isVertical:!1,isDraggable:!0,length:3}),q=L({id:"destroyer",classes:["ship","draggable"],isVertical:!1,isDraggable:!0,length:2});const N=function(n,e){var t,r,a=v({id:"restart-game-btn",classes:["btn"],textContent:"Restart Game",clickHandler:function(n){V.publish(j,n)}}),i=v({id:"reset-ships-btn",classes:["btn"],textContent:"Reset Ships",clickHandler:function(){t.removeAllShips(),G.player1Gameboard.resetBoard(),d()}}),o=document.querySelector("#first-player-ships"),s=[M,Y,F,W,q],c=v({id:"random-ships-btn",classes:["btn"],textContent:"Random",clickHandler:function(){t.removeAllShips(),G.player1Gameboard.resetBoard(),s.forEach((function(n){var e,r=G.player1Gameboard.getValidShipCoordinates(Number(n.getView().dataset.length));(e=G.player1Gameboard).placeShipAt.apply(e,D(r)),n.isPlaced=!0,r.forEach((function(n){t.changeShipStateFor(n,!0)}))}))}});o.append(c.getView(),i.getView(),a.getView());var l=document.querySelector(".output-msg");function d(){s.forEach((function(n){n.isPlaced=!1})),s.forEach((function(n){n.getView().addEventListener("dragstart",(function(n){l.textContent="Hold `shift` to flip the ship",n.target.classList.add("dragging")})),n.getView().addEventListener("drag",(function(e){e.shiftKey?n.setIsVertical(!0):n.setIsVertical(!1)})),n.getView().addEventListener("dragend",(function(e){e.target.classList.remove("dragging"),n.setIsVertical(!1)}))})),document.querySelectorAll('.board-unit[data-player="1"]').forEach((function(n){var e=[];function r(){e.forEach((function(n){t.changeShipHintClass(n,!1)})),e=[]}n.addEventListener("dragover",(function(a){var i=document.querySelector(".dragging"),o=Number(i.dataset.length),s=Number(n.dataset.x),c=Number(n.dataset.y);if(o>0){if(r(),"true"===i.dataset.isVertical)for(var l=0;l<=o-1;l++)e.push({x:s,y:c+l});else for(var d=0;d<=o-1;d++)e.push({x:s+d,y:c});G.player1Gameboard.canPlaceShipAt(e)&&(a.preventDefault(),e.forEach((function(n){t.changeShipHintClass(n,!0)})))}})),n.addEventListener("dragleave",(function(){r()})),n.addEventListener("drop",(function(){var n,a=document.querySelector(".dragging");if(Number(a.dataset.length)>0&&(n=G.player1Gameboard).placeShipAt.apply(n,D(e))){e.forEach((function(n){t.changeShipStateFor(n,!0)}));var i=s.find((function(n){return n.getView().id===a.id}));i&&(i.isPlaced=!0)}r()}))}))}function u(n){if(n.target.dataset.x||n.target.dataset.y){n.stopPropagation();var e=Number(n.target.dataset.x),t=Number(n.target.dataset.y),a=Number(n.target.dataset.player);if(G.isFirstPlayerTurn){if(2!==a)return;var i=G.player2Gameboard.receiveAttack({x:e,y:t});if(!i)return;i.isMissedAttack?(r.changeHitStateFor({x:e,y:t},!0),G.nextPlayerTurn()):(r.changeHitStateFor({x:e,y:t},!1),G.checkForWinner())}}}function A(){t.getView().addEventListener("click",u),r.getView().addEventListener("click",u)}function p(){t.getView().removeEventListener("click",u),r.getView().removeEventListener("click",u)}var f=document.querySelector("#game-container"),g=m({id:"game-overlay",classes:["game-overlay","hide"]});return g.append(m({type:"label",id:"name-label",textContent:"Enter your name"}),m({type:"input",id:"name-input",classes:["input"]})),f.append(g),V.subscribe(w,(function(){G.placeShipsOnBoards(),c.enableBtn(),a.disableBtn();var n=document.querySelector("#first-player-ships #ships-container");n.append.apply(n,D(s.map((function(n){return n.getView()})))),d(),i.enableBtn(),r.showOverLay(),r.enableStartGameBtn()})),V.subscribe(k,(function(){c.disableBtn(),i.disableBtn(),r.hideOverlay(),A(),l.textContent="Game started",a.enableBtn(),G.isFirstPlayerTurn=!0})),V.subscribe(O,(function(n){p(),l.textContent="*** ".concat(n.winner.name," WON!! ***")})),V.subscribe(x,(function(n){n.response.isMissedAttack?(t.changeHitStateFor(n.coordinates,!0),G.isFirstPlayerTurn=!0):(t.changeHitStateFor(n.coordinates,!1),G.nextPlayerTurn())})),V.subscribe(j,(function(){G.player1Gameboard.resetBoard(),G.player2Gameboard.resetBoard(),t.resetBoard(),r.resetBoard(),l.textContent="",V.publish(w)})),{renderBoards:function(){t=B({id:"first-player-board",classes:["board"],boardArray:G.player1Gameboard.getBoard(),playerId:G.player1Gameboard.getPlayerId(),startGameClickHandler:null}),r=B({id:"second-player-board",classes:["board"],boardArray:G.player2Gameboard.getBoard(),playerId:G.player2Gameboard.getPlayerId(),startGameClickHandler:function(){s.every((function(n){return n.isPlaced}))?V.publish(k):l.textContent="Please place all ships to start the game"}}),n.append(t.getView()),e.append(r.getView())},setupClickHandlers:A,removeClickHandlers:p,setupDraggableShips:d,showGameOverlay:function(){g.classList.remove("hide")},hideGameOverlay:function(){g.classList.add("hide")}}}(document.querySelector("#first-player-container"),document.querySelector("#second-player-container"));function U(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function R(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?U(Object(t),!0).forEach((function(e){Z(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Z(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var z=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.name,t=n.id;return{get name(){return e},get id(){return t}}};function _(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function X(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?_(Object(t),!0).forEach((function(e){$(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function $(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const J=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n=n.map((function(n){return X(X({},n),{},{isHit:!1})})),{get length(){return n.length},hit:function(e){n.find((function(n){return n.x===e.x&&n.y===e.y})).isHit=!0},isHitAt:function(e){var t=n.find((function(n){return n.x===e.x&&n.y===e.y}));return t&&t.isHit},isSunk:function(){return n.every((function(n){return!0===n.isHit}))},getHitCoordinates:function(){return n.filter((function(n){return!0===n.isHit}))},getCoordinates:function(){return n}}};var Q=function(n,e){return n.every((function(n){return n.x>=0&&n.x<e&&n.y>=0&&n.y<e}))},K=function(n,e){return e.find((function(e){return e.getCoordinates().some((function(e){return e.x==n.x&&e.y==n.y}))}))};const nn=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=[],r=[],a=[],i=n-1;i>=0;i--)for(var o=0;o<n;o++)t.push({y:i,x:o});var s=function(e){if(!Q([e],n))return!1;var t=K(e,r);return!(t&&t.isHitAt(e)||a.find((function(n){return n.x===e.x&&n.y===e.y})))};return{get size(){return n},get player(){return e},canPlaceShipAt:function(e){return!!Q(e,n)&&!e.some((function(n){return K(n,r)}))},placeShipAt:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];if(!this.canPlaceShipAt(e))return!1;var a=J(e);return r.push(a),!0},getBoard:function(){return[].concat(t)},getShips:function(){return[].concat(r)},hasShipAt:function(n){return!!K(n,r)},getMissedAttacks:function(){return[].concat(a)},receiveAttack:function(n){if(!s(n))return!1;var e=K(n,r);return e?(e.hit(n),{isMissedAttack:!1}):(a.push(n),{isMissedAttack:!0})},isAllShipsSunk:function(){return r.every((function(n){return n.isSunk()}))},resetBoard:function(){r.length=0,a.length=0},getPlayerId:function(){return e.id},getValidShipCoordinates:function(e){for(var t=[],r=b(n),a=!1;!a;){if(t=[],(r=b(n)).x+e-1<n)for(var i=0;i<e;i++)t.push({x:r.x+i,y:r.y});else if(r.x-e>=0)for(var o=e-1;o>=0;o--)t.push({x:r.x-o,y:r.y});else if(r.y+e-1<n)for(var s=0;s<e;s++)t.push({x:r.x,y:r.y+s});else if(r.y-e>=0)for(var c=e-1;c>=0;c--)t.push({x:r.x,y:r.y-c});a=this.canPlaceShipAt(t)}return t}}};var en,tn,rn,an=z({name:"Player1",id:1}),on=nn(9,an),sn=(en=on,tn=z({name:"Computer",id:2}),rn=[],R(R({},tn),{},{play:function(){var n=rn.shift();n||(n=b(en.size));for(var e=en.receiveAttack(n);!e;)(n=rn.shift())||(n=b(en.size)),e=en.receiveAttack(n);return e.isMissedAttack||(rn.push({x:n.x+1,y:n.y}),rn.push({x:n.x-1,y:n.y}),rn.push({x:n.x,y:n.y+1}),rn.push({x:n.x,y:n.y-1})),{coordinates:n,response:e}}})),cn=nn(9,sn);V.publish(S,{p1:an,p1Gameboard:on,p2:sn,p2Gameboard:cn}),N.renderBoards(),V.publish(w),N.setupClickHandlers()})()})();
//# sourceMappingURL=main.js.map